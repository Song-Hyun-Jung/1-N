<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.mybatis.mapper.DeliveryCommentMapper">

<cache />

<insert id="insertDeliveryComment" parameterType="DeliveryComment">
      <selectKey keyProperty="commentId" resultType="int" order="BEFORE">
         SELECT deliverycommentId_Seq.nextval AS commentId FROM DUAL
      </selectKey>
      INSERT INTO DELIVERYCOMMENT (commentId, userId, postId, comment, choice)
      VALUES (#{commentId}, #{userId}, #{postId}, #{comment}, false) 
 </insert>

<!-- 댓글이 선택되면 choice를 false에서 true로 변경 -->
<update id="updateChooseComment" parameterType="int">
		UPDATE DELIVERYCOMMENT 
		SET choice=true
		WHERE commentId= #{commentId}
</update>

</mapper>

